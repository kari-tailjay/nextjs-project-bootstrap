(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2619:(e,n,t)=>{"use strict";t.d(n,{default:()=>o});var l=t(5155),s=t(2115);let a={slotWidth:2.5,slotLength:5,aisleWidth:6,angles:[90,60,45],turningRadius:6},o=()=>{let[e,n]=(0,s.useState)(null),[t,o]=(0,s.useState)(a),[i,r]=(0,s.useState)([]),[d,c]=(0,s.useState)(null),u=()=>{if(!e||0===e.polygons.length)return void alert("Please upload a valid DXF file with lot boundary.");e.polygons[0].points,e.obstacles.map(e=>({points:e.points})),r([{slots:[],totalSlots:0}]),c(0)};return(0,l.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Parking Lot Layout Designer"}),(0,l.jsxs)("section",{className:"mb-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Upload AutoCAD DXF File"}),(0,l.jsx)("input",{type:"file",accept:".dxf",onChange:e=>{var t;let l=(null==(t=e.target.files)?void 0:t[0])||null;if(l){let e=new FileReader;e.onload=e=>{var t;if("string"==typeof(null==(t=e.target)?void 0:t.result))try{n({polygons:[],obstacles:[],entryPoints:[]}),r([]),c(null)}catch(e){alert("Failed to parse DXF file.")}},e.readAsText(l)}},className:"mb-4"}),e&&(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsxs)("p",{children:["Parsed ",e.polygons.length," lot boundary polygon(s), ",e.obstacles.length," obstacle(s), and ",e.entryPoints.length," entry/exit point(s)."]})})]}),(0,l.jsxs)("section",{className:"mb-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Design Constraints"}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u()},className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium mb-1",children:"Slot Width (m)"}),(0,l.jsx)("input",{type:"number",step:"0.1",min:"1",value:t.slotWidth,onChange:e=>o({...t,slotWidth:parseFloat(e.target.value)}),className:"w-full border rounded px-3 py-2",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium mb-1",children:"Slot Length (m)"}),(0,l.jsx)("input",{type:"number",step:"0.1",min:"1",value:t.slotLength,onChange:e=>o({...t,slotLength:parseFloat(e.target.value)}),className:"w-full border rounded px-3 py-2",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium mb-1",children:"Aisle Width (m)"}),(0,l.jsx)("input",{type:"number",step:"0.1",min:"1",value:t.aisleWidth,onChange:e=>o({...t,aisleWidth:parseFloat(e.target.value)}),className:"w-full border rounded px-3 py-2",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium mb-1",children:"Allowed Angles (degrees, comma separated)"}),(0,l.jsx)("input",{type:"text",value:t.angles.join(", "),onChange:e=>{let n=e.target.value.split(",").map(e=>parseInt(e.trim())).filter(e=>!isNaN(e));o({...t,angles:n})},className:"w-full border rounded px-3 py-2",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-medium mb-1",children:"Turning Radius (m)"}),(0,l.jsx)("input",{type:"number",step:"0.1",min:"1",value:t.turningRadius,onChange:e=>o({...t,turningRadius:parseFloat(e.target.value)}),className:"w-full border rounded px-3 py-2",required:!0})]}),(0,l.jsx)("button",{type:"submit",className:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800 transition",children:"Generate Layout"})]})]}),i.length>0&&(0,l.jsxs)("section",{className:"mb-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Generated Parking Lot Models"}),(0,l.jsx)("ul",{className:"space-y-2",children:i.map((e,n)=>(0,l.jsx)("li",{children:(0,l.jsxs)("button",{className:"px-4 py-2 rounded border ".concat(d===n?"bg-black text-white":"bg-white text-black"),onClick:()=>c(n),children:["Model ",n+1," - Slots: ",e.totalSlots]})},n))}),null!==d&&(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)("button",{onClick:()=>{if(null===d)return void alert("No model selected for export.");let e=new Blob([function(e){let n="";return e.forEach(e=>{let t=e.angle*Math.PI/180,l=Math.cos(t),s=Math.sin(t),a=e.bottomLeft,o={x:a.x+e.width*l,y:a.y+e.width*s},i={x:o.x-e.length*s,y:o.y+e.length*l},r={x:a.x-e.length*s,y:a.y+e.length*l};n+="0\nPOLYLINE\n8\nParkingSlots\n66\n1\n70\n1\n0\nVERTEX\n8\nParkingSlots\n10\n".concat(a.x.toFixed(3),"\n20\n").concat(a.y.toFixed(3),"\n30\n0.0\n0\nVERTEX\n8\nParkingSlots\n10\n").concat(o.x.toFixed(3),"\n20\n").concat(o.y.toFixed(3),"\n30\n0.0\n0\nVERTEX\n8\nParkingSlots\n10\n").concat(i.x.toFixed(3),"\n20\n").concat(i.y.toFixed(3),"\n30\n0.0\n0\nVERTEX\n8\nParkingSlots\n10\n").concat(r.x.toFixed(3),"\n20\n").concat(r.y.toFixed(3),"\n30\n0.0\n0\nSEQEND\n")}),"0\nSECTION\n2\nHEADER\n0\nENDSEC\n0\nSECTION\n2\nTABLES\n0\nENDSEC\n0\nSECTION\n2\nBLOCKS\n0\nENDSEC\n0\nSECTION\n2\nENTITIES\n"+n+"0\nENDSEC\n0\nEOF\n"}(i[d].slots)],{type:"application/dxf"}),n=URL.createObjectURL(e),t=document.createElement("a");t.href=n,t.download="parking_lot_layout.dxf",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(n)},className:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800 transition",children:"Export Selected Model as DXF"})})]})]})}},9691:(e,n,t)=>{Promise.resolve().then(t.bind(t,2619))}},e=>{var n=n=>e(e.s=n);e.O(0,[441,684,358],()=>n(9691)),_N_E=e.O()}]);